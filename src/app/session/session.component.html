<div class="container-fluid">

  <router-outlet name="permissions-popup"></router-outlet>
  <router-outlet name="requests-popup"></router-outlet>

  <app-sidebar orientation="left">
    <button appSidebarControl class="toggle-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
      <i class="material-icons">info</i>
    </button>
    <div appSidebarContent>
      <h2>
        Session Info
      </h2>
      <h3> {{ sessionInfo?.title }} </h3>
      <div class="session-info">
        <h3>Tutor</h3>
        <div>
          <app-display-user [user]="sessionInfo?.tutor"></app-display-user>
        </div>
        <h3>Tutees</h3>
        <div class="tutees-display">
          <app-user-auto-complete [ngModel]="sessionInfo?.tutees" (onAddUser)="addTutee($event)" (onRemoveUser)="removeTutee($event)"></app-user-auto-complete>
        </div>
      </div>
      <div *ngIf="!sessionExist">
        Session does not exist
      </div>
      <h2>
        online users
      </h2>
      <div class="online-users-display">
        <app-display-user *ngFor="let user of onlineUsers" [user]="user"></app-display-user>
      </div>
      <div class="session-actions">
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" [routerLink]="[{ outlets: { 'permissions-popup': ['permissions'], 'requests-popup': null } }]">Permissions</button>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" [routerLink]="[{ outlets: { 'requests-popup': ['requests'], 'permissions-popup': null } }]">Pending join requests</button>
      </div>
    </div>
  </app-sidebar>
  <app-sidebar orientation="right">
    <button appSidebarControl class="toggle-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored">
      <i class="material-icons">chat</i>
    </button>
    <div appSidebarContent>
      <div class="chat-container" *ngIf="sessionExist">
        <app-chat [key]="sessionInfo.chat"></app-chat>
      </div>
    </div>
  </app-sidebar>

  <app-sidebar orientation="top">
    <button appSidebarControl class="toggle-button mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-button--accent">
      View Whiteboards
    </button>
    <div appSidebarContent>
      <div class="whiteboard-select" *ngIf="sessionExist">
        <div class="btn-group">
          <button (click)="addWb()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Add Whiteboard</button>
          <button (click)="deleteWb()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">Delete Whiteboard</button>
        </div>
        <app-whiteboard-select (onSelect)="onSelectWb($event)" [whiteboards]="sessionInfo.whiteboards">
        </app-whiteboard-select>
      </div>
    </div>
  </app-sidebar>
  <div class="whiteboard-container" *ngIf="sessionExist">
    <app-whiteboard  [key]="selectedWb?.$key"></app-whiteboard>
  </div>
</div>
